{% extends 'Normal-User/index.html' %}
{% load static %}
{% block title%}
<title>Influencer Hiring | Packages Details</title>
{% endblock %}
{%block head%}
<div class="header dash-header ">
{%endblock%}
{%block active%}
<li> <a href="/" class="">Home</a> </li>
<li> <a href="/influencers/" class="">Explore</a> </li>
<li> <a href="/blogs/" class="">Blogs</a> </li>
<li> <a href="/webstories/">Web-Stories</a> </li>
<li> <a href="/casting-call/">Casting Call</a> </li>
<li> <a href="/whitepaper/" class="">White Paper</a> </li>
{%endblock%}
{% block body %}

<section class="influncr_package py-5">
    <div class="container">
        <div class="package_influncer_detail">
            <div class="row">
                <div class="col-lg-8">
                    <div class="row">
                          <div class="col-lg-3 mobile_center">
                              <div class="index-banner-img pe-5 d-inline-block">
                                  <img src="/media/{{info.profileimage1}}" alt="{{info.fullname}}" class="img-fluid">
                              </div>
                          </div>
                          <div class="col-lg-8 heading-center-mobile">
                              <h2 id="wish-video" class="sub_heading mb-3">
                                  <span class="main-color position-relative">Paying to </span> <p>{{info.fullname}}</p>
                              </h2>
                              <p>{{info.short_description}}</p>
                              <input type="hidden" id="infouser" name="infouser" value="{{info.influencer_userid}}"/>
                              <input type="hidden" id="bplanid" name="bplanid" value="{{vdct.planid}}"/>
                              <input type="hidden" id="bserviceid" name="bserviceid" value="{{vdct.serviceid}}"/>
                          </div>
                      </div>

                    <div class="greeting-services-tabs">
                      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                          <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true"><img src="/media/Birhday_update.webp/" alt="birthday" class="img-fluid"> Birthday</button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false"><img src="/media/Anniversary.webp/" alt="anniversary" class="img-fluid"> Anniversary</button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button class="nav-link" id="pills-contact-tab" data-bs-toggle="pill" data-bs-target="#pills-contact" type="button" role="tab" aria-controls="pills-contact" aria-selected="false"><img src="/media/Wedding.webp/" alt="wedding" class="img-fluid"> Wedding</button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button class="nav-link" id="pills-others-tab" data-bs-toggle="pill" data-bs-target="#pills-Motivation" type="button" role="tab" aria-controls="pills-others" aria-selected="false"><img src="/media/Motivation.webp/" alt="motivation" class="img-fluid"> Motivation</button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button class="nav-link" id="pills-others-tab" data-bs-toggle="pill" data-bs-target="#pills-others" type="button" role="tab" aria-controls="pills-others" aria-selected="false"><img src="/media/other-greeting.webp/" alt="other-greeting" class="img-fluid">Others</button>
                        </li>
                      </ul>

                      
                      <div class="tab-content pt-3" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                            <div id="greeting-card-slider" class="owl-carousel">
                              
                              {%for i in temp%}
                              
                              <div class="item">
                                <div class="form-check right_radio_btn" id="cls-{{i.templatesid}}">
                    
                                  {% if forloop.counter0 == 1 %}
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" value="{{i.templatesid}}" checked>
                                  {% else %}
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" >
                                  {% endif %}
                           
                                </div>
                                <div class="pricing__table">
                                  <h3 class="heading mb-3">{{i.templatename}} </h3>
            
                                  <p contenteditable=true id='some-id-{{i.templatesid}}'>{{i.templatetext}}</p>
  
                                  <div class="d-flex justify-content-end">
                                    <button class="order__button" id="edit-button">
                                      <i class="fas fa-pencil-alt"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                              
                              {%endfor%}
                              
                              
                            </div> 
                          </div>

                      
<script>
  var tempid="";

  var temptext="";

  document.addEventListener("DOMContentLoaded", function() {
    let tempid = document.querySelector('input[name="flexRadioDefault"]:checked').value;
    
    console.log("Rahul Barawal");
    console.log(tempid);

    if (document.querySelector('input[name="flexRadioDefault"]:checked').value === tempid) {
        highlight(tempid);
        let myDiv = document.getElementById("cls-" + tempid);
        console.log(myDiv);
        if (myDiv) {
            myDiv.classList.add("active");
        }
       
            console.log("inner paragraph temptext");
            temptext=document.getElementById("some-id-"+tempid).textContent;
            tempid=parseInt(tempid);
    console.log(temptext);

    }
});


</script> 
                         

                          
                          <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                            <div id="Anniversary-card-slider" class="owl-carousel">
                              
                              {%for i in temp1%}
                            
                              
                              <div class="item">
                                <div class="form-check right_radio_btn">
                               
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" >
                             
                                </div>

                                <div class="pricing__table">
                                  <h3 class="heading mb-3">{{i.templatename}} </h3>
                                  
                                  <p contenteditable=true id='some-id-{{i.templatesid}}'>{{i.templatetext}}</p>
                                  <div class="d-flex justify-content-end">
                                    <button class="order__button" id="edit-button">
                                      <i class="fas fa-pencil-alt"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                            
                              {%endfor%}
                              
                              
                            </div> 
                          </div>

                          <div class="tab-pane fade" id="pills-contact" role="tabpanel" aria-labelledby="pills-contact-tab">
                            <div id="wedding-card-slider" class="owl-carousel">
                              
                              {%for i in temp2%}
                             
                              <div class="item">
                                <div class="form-check right_radio_btn">
                               
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" >
                              
                                </div>
                                <div class="pricing__table">
                                  <h3 class="heading mb-3">{{i.templatename}} </h3>
                                  
                                  <p contenteditable=true id='some-id-{{i.templatesid}}'>{{i.templatetext}}</p>
                                  <div class="d-flex justify-content-end">
                                    <button class="order__button" id="edit-button">
                                      <i class="fas fa-pencil-alt"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                              
                              {%endfor%}
                              
                              
                            </div> 
                          </div>

                          <div class="tab-pane fade" id="pills-Motivation" role="tabpanel" aria-labelledby="pills-Motivation-tab">
                            <div id="Motivation-card-slider" class="owl-carousel">
                              
                              {%for i in temp3%}
                             
                              <div class="item">
                                <div class="form-check right_radio_btn">
                                  
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" >
                          
                                </div>
                                <div class="pricing__table">
                                  <h3 class="heading mb-3">{{i.templatename}} </h3>
                                  
                                  <p contenteditable=true id='some-id-{{i.templatesid}}'>{{i.templatetext}}</p>
  
                                  <div class="d-flex justify-content-end">
                                    <button class="order__button" id="edit-button">
                                      <i class="fas fa-pencil-alt"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                              
                              {%endfor%}
                              
                              
                            </div> 
                          </div>

                          <div class="tab-pane fade" id="pills-others" role="tabpanel" aria-labelledby="pills-others-tab">
                            <div id="others-card-slider" class="owl-carousel">
                              
                              {%for i in temp4%}
                              
                              <div class="item">
                                <div class="form-check right_radio_btn">
                               
                                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexCheckDefault-{{i.templatesid}}" onclick="highlight({{i.templatesid}});" >
                             


                                </div>
                                <div class="pricing__table">
                                  <h3 class="heading mb-3">{{i.templatename}} </h3>
                                  
                                  <p contenteditable=true id='some-id-{{i.templatesid}}'>{{i.templatetext}}</p>
  
                                  <div class="d-flex justify-content-end">
                                    <button class="order__button" id="edit-button">
                                      <i class="fas fa-pencil-alt"></i>
                                    </button>
                                  </div>
                                </div>
                              </div>
                             
                              {%endfor%}
                            </div> 
                          </div>
                        </div>
<!-- 
                   <div class="d-flex justify-content-end">
                      <button class="order__button submit-button">Submit</button>
                    </div> -->
                  </div>
                
              

                   <!-- <h3 class="mt-4 mb-2">Refund Policy</h3> -->
                   <div class="card refund-card p-3 mt-3 rounded-3 border-0">
                    <p class=""><span class="main-color fw-bold fs-5">{{refund.0.Title}}</span> {{refund.0.Description|safe}}</p>
                   </div>


                </div>
                <div class="col-lg-4">
                    <div class="quiz-window">
                      <div class="quiz-window-header">
                        <h5 class="footer-widget__title text-white ms-1">Greeting Services</h5>
                      </div>
                      <div class="quiz-window-body">
                        <div class="gui-window-awards">
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Price :</li>
                            <li class="guiz-awards-track" id="bcpr">{{cur}} 0</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Other Charges :</li>
                            <li class="guiz-awards-track" id="orcs">{{cur}} 0</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Tax :</li> 
                            <!-- (+{{taxpr}}%) -->
                            <li class="guiz-awards-track" id="taxamt">{{cur}} 0</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even d-flex justify-content-between">
                            <li class="guiz-awards-title me-2">
                              {% csrf_token %}
                              <input type="text" name="couponcode" id="couponcode" class="form-control" placeholder="Gift card or discount code"></li>
                            <li class="guiz-awards-track apply_code">
                                <input type="button" class="btn btn-block btn--outline-base" onclick="filter1();" id="submitUpdatePledge" value="Apply">
                                <input type="hidden" id="coupused" name="coupused" value='true'/>
                            </li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even total-Payble">
                            <li class="guiz-awards-title fw-bold">Amount Payable :</li>
                            <li class="guiz-awards-track fw-bold" id="gtotol">{{cur}} 0</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even" id="saveline">
                            <li class="guiz-awards-title text saving_heading">You have to apply couponcode for total savings on this order.</li>
                          </ul>
                        </div>
                    
                      </div>
                    </div>

                    <script>

                      
function removecode(){
  document.getElementById("couponcode").value = '';
  document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text saving_heading" >You have to apply couponcode for total savings on this order.</li>';
}

                      function filter1(){
                          var ser=document.getElementById("couponcode").value;
                          var bserviceid =document.getElementById("bserviceid").value;
                          if (document.getElementById("coupused").value==='true'){
                              $.ajax({
                                  type:'POST',
                                  url:'{% url "package" %}',
                                  headers: {
                                    'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()
                                },
                                  data:
                                  {
                                      coupon:ser,
                                      serid:bserviceid,
                                 //   csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                                  },
                                  success: function(response){
                                    console.log("Rahul");
                                    console.log(response['results']);
                      
                                    
                                    var total=document.getElementById("gtotol").innerHTML;
                                    var cur=total.slice(0,3);
                                    var rup=parseFloat(document.getElementById("bcpr").innerHTML.slice(4,))+parseFloat(document.getElementById("orcs").innerHTML.slice(4,))+parseFloat(document.getElementById("taxamt").innerHTML.slice(4,));
                                    console.log("rupeesssssssssss");
                                    console.log(rup);
  
                                    rup=Math.ceil(rup);
                                    var dis=rup * (response['results']/100);
                                    if (response['results']===0){
                                      document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have already used this couponcode.</li>';
                                    }
                                    else if(response['results']===-2){
                                      
                                      document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied expired couponcode.</li>';
                                      
                                    }
                                    else if(response['results']===-3){
                                      
                                      document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied wrong couponcode.</li>';
                                     
                                    }
                                    else if(response['results']===-4){
                                      
                                      document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied couponcode exceeded the upper limit.</li>';
                                     
                                    }
                                    else {
                                      
                                     
                                      console.log("amount");
                                      console.log(dis);
  
                                      dis=Math.ceil(dis * 100) / 100;
                                      console.log("dis amount");
                                      console.log(dis);
                                      var grandtotal=parseInt(rup)-dis;
                                      console.log('grandtotal');
                                      console.log(grandtotal);
                                      grandtotal=Math.ceil(grandtotal * 100) / 100;
                                      dis=cur +" "+ dis.toString();
                                      grandtotal=cur +" "+ grandtotal.toString();
                                      console.log('total');
                                      console.log(total);
                                      console.log("discount");
                                      console.log(dis);
                                      console.log('grandtotal');
                                      console.log(grandtotal);
                                      document.getElementById("gtotol").innerHTML=grandtotal;
                                      document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-success saving_heading" >Your Total Savings on this order '+dis+'</li>';
                                    //  getpaymentmethod();
                                    }
                                  }            
              })
            }
      };
</script>
  
  
                    <div class="payment_mode mt-4">
                   <!--  <h5 class="footer-widget__title fs-4 text--base ms-1 mb-sm-3 mb-2 pb-1"></h5> -->
                        <div class="row">
                            <div class="quiz-window-header">
                                <h5 class="footer-widget__title text-white ms-1">Payment Methods</h5>
                              </div>
                            <div class="col-md-12">
                                <div class="radio form-group">
                                  <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-0" type="radio" name="availPayment" value="PayPal" >
                                        <label for="CC-0" class="ms-2">PayPal</label>
                                    </div>
                                    <img src="{%static 'images/paypal.png'%}" alt="paypal" class="img-fluid">
                                </div>
                                
                                <div class="radio form-group">
                                  <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-1" type="radio" name="availPayment" value="Credit / Debit Card (Stripe)" checked >
                                        <label for="CC-1" class="ms-2">Credit / Debit Card</label>
                                    </div>
                                    <img src="{%static 'images/strip.png'%}" alt="paypal" class="img-fluid">
                                </div>
                                
                                <div class="radio form-group">
                                  <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-2" type="radio" name="availPayment" value="UPI Payment" disabled >
                                        <label for="CC-2" class="ms-2">UPI Payments</label>
                                    </div>
                                    <img src="{%static 'images/upi-payment.png'%}" alt="UPI" class="img-fluid">
                                </div>
                                
                                <div class="radio form-group" >
                                  <div class="d-flex"  >
                                      <input id="CC-3" type="checkbox" value="Wallet" onclick="freshvalue();refreshbutton();disableother();" >
                                      <label for="CC-3" class="mx-2">Wallet</label>
    
                                      <span>{{request.user.clientpayout.currency}} {{request.user.clientpayout.remaining_balance_bank}}</span>
    
                                  </div>
                                  <img src="{%static 'images/wallet.jpg'%}" alt="wallet" class="img-fluid">
                              </div>

                                <div class="guiz-awards-buttons p-0 pb-3">
                                  <button type="button"  class="btn btn-block btn--outline-base" id="checkout-button" > Pay Now </button>
                                </div>
                            </div>
                        </div>
                   </div>
                   <script>


                    var tempid="";
                    var temptext="";
                    
                    function highlight(id){
                      var selector = '.right_radio_btn';
console.log('execute this agency');

                      $(selector).on('click', function(){
                        $(selector).removeClass('active');
                        $(this).addClass('active');
                    });
                    
                    tempid=id;
                    
                    var maxLength = 551;
                    var myParagraph = document.getElementById("some-id-"+tempid);
                    myParagraph.addEventListener('input', function() {
                      if (myParagraph.textContent.length > maxLength) {
                        myParagraph.textContent = myParagraph.textContent.slice(0, maxLength);
                        //alert("You have reached the limit of 551 characters.");
                        console.log("inner paragraph");
                        console.log(myParagraph.textContent);
                        temptext=myParagraph.textContent;
console.log('innertexr',temptext);

                      }
                    });


                    console.log("Inner Content..........");
                    console.log(tempid);
                    
console.log('outertext',temptext);
                    removecode();
                    chnageamount();



                    }

                    function chnageamount(){
                      refreshgateways();
                  var cur = '{{cur}}';
                  var pr=parseInt('{{vdct.finalamount}}');
                  var taxpr=parseInt('{{taxpr}}');
                  var taxamount=pr * (taxpr/100);
                  taxamount=Math.ceil(taxamount * 100) / 100;
                  var grandtotal=pr+taxamount;
                  grandtotal=Math.ceil(grandtotal).toFixed(2);
                  taxamount=cur +" "+ taxamount.toString();
                  grandtotal=cur +" "+ grandtotal.toString();
                  var amount=cur +" "+pr.toString();
                  document.getElementById("bcpr").innerHTML=amount;
                  document.getElementById("taxamt").innerHTML=taxamount;
                  document.getElementById("gtotol").innerHTML=grandtotal;
                 // getpaymentmethod();
                  
                    }
                    
                    
                    </script>
                   <script src="https://js.stripe.com/v3/"></script>
                   <script type="text/javascript">
                     
                    function refreshgateways(){
                      var maleRadio = document.getElementById("CC-1");
                    
                    // Set the 'checked' property to false to uncheck the radio button
                    maleRadio.checked = "";
                    //var// maleRadio1 = document.getElementById("CC-2");
                    
                    // Set the 'checked' property to "" to uncheck the radio button
                   // maleRadio1.checked = true;
                    var maleRadio2 = document.getElementById("CC-0");
                    
                    // Set the 'checked' property to "" to uncheck the radio button
                    maleRadio2.checked = "";
                    }
          
                    


                    function freshvalue(){
                      var maleRadio = document.getElementById("CC-1");
                        
                        // Set the 'checked' property to false to uncheck the radio button
                        maleRadio.checked = "";
                        //var// maleRadio1 = document.getElementById("CC-2");
                        
                        // Set the 'checked' property to "" to uncheck the radio button
                       // maleRadio1.checked = "";
                        var maleRadio2 = document.getElementById("CC-0");
                        
                        // Set the 'checked' property to "" to uncheck the radio button
                        maleRadio2.checked = "";
                    }
                    

                    function disableother(){
                      wallamt = '{{request.user.clientpayout.remaining_balance_bank}}';
                      var reqamt = 0;
                      reqamt = parseFloat(document.getElementById("gtotol").innerHTML.slice(4,));
                      
                    
                      var walletck = document.getElementById('CC-3');
                    
                    
                      if (walletck.checked) {
                    
                      if (wallamt >= reqamt) {
                    
                      var maleRadio = document.getElementById("CC-1");
                        
                        // Set the 'checked' property to false to uncheck the radio button
                        maleRadio.disabled = true;
                        //var// maleRadio1 = document.getElementById("CC-2");
                        
                        // Set the 'checked' property to "" to uncheck the radio button
                       // maleRadio1.disabled = true;
                        console.log('rahualcczx csdfradio ');
                    
                      }
                    
                     
                    }
                    else
                    {
                      var maleRadio = document.getElementById("CC-1");
                      
                      // Set the 'checked' property to false to uncheck the radio button
                      maleRadio.disabled = false;
                      //var// maleRadio1 = document.getElementById("CC-2");
                      
                      // Set the 'checked' property to "" to uncheck the radio button
                     // maleRadio1.disabled = false;
                    }
                    
                    }
                    
                    

                   
function wallchnage(){
  var walletid = 0;
var wallamt = 0;
  var buttonClicked = false; 
  walletid = `{{request.user.clientpayout.payoutid}}`;
  wallamt = '{{request.user.clientpayout.remaining_balance_bank}}';
  var reqamt = 0;
  reqamt = parseFloat(document.getElementById("gtotol").innerHTML.slice(4,));
  
  if (wallamt >= reqamt) {

              // Your custom click event handler code here
              var infoid = document.getElementById("infouser").value;
              var bserviceid = document.getElementById("bserviceid").value;
              var bplanid = document.getElementById("bplanid").value;
              var othercharges = document.getElementById("orcs").innerHTML;
              othercharges = othercharges.slice(4);

              $.ajax({
                  type: 'POST',
                  url: '{% url "Walletpurchase" %}',
                  headers: {
                      'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()
                  },
                  data: {
                      walletid: walletid,
                      infoid: infoid,
                      bserviceid: bserviceid,
                      bplanid: bplanid,
                      othercharges: othercharges,
                      tempid:tempid,
                      temptext:temptext,
                     
                      
                  },
                  success: function(response) {
                      console.log("Rahul");
                      console.log(response);

                      if (response['results'] === 'ok') {
                          redirecttourl('/payment-wallet-success/');
                      }
                  }
              })

              console.log('Button clicked with new id!');
      
  }
  else{
    console.log('2');

    console.log('You have insufficient balance to process your order.');

    var method = document.querySelector('input[name="availPayment"]:checked');

    console.log(method);
    if (method === null) {
      // The value is null
      console.log('You have not selected another option');

      //alert('You have minimum balance in your wallet, select another method with wallet to use it.');
    }

    else{

      method= method.value;


    if (method === 'PayPal')

    {
      
       
                   
                        var radioButton = document.getElementById("CC-1");
                       // radioButton.checked = false;
                        var infoid = document.getElementById("infouser").value;
                        var bserviceid =document.getElementById("bserviceid").value;
                        var bplanid=document.getElementById("bplanid").value;
                        var othercharges=document.getElementById("orcs").innerHTML;
                   
                        window.location.href = `https://www.influencerhiring.com/paypalbutton/?infoid=${infoid}&bserviceid=${bserviceid}&bplanid=${bplanid}&othercharges=${othercharges}&tempid=${tempid}&temptext=${temptext}`; 
                   
                   
                   

  
    }
  
    
  
  
  
  
   else if (method === 'Credit / Debit Card (Stripe)')
  {

    
    var stripe = Stripe('pk_live_51MZ69BSEqjetbOctzEJCbXdu63iFQGlF3cQiNRpNMnLvlIj93QWzz6QjO6GYucIbsp4b1xGKjfH33jscYIFSn3KD00SrlrQRaa');
   
      var radioButton = document.getElementById("CC-1");
      //radioButton.checked = false;
      var infoid = document.getElementById("infouser").value;
      var bserviceid =document.getElementById("bserviceid").value;
      var bplanid=document.getElementById("bplanid").value;
      var othercharges=document.getElementById("orcs").innerHTML;
     //  var tempid=document.getElementById("time").value; 
     //var tempid=1;
      console.log("tempid");
      console.log(tempid); 
      //var temptext="Rahul Barawa";
     
              data={
                'infoid':infoid,
                'bserviceid':bserviceid,
                'bplanid':bplanid,
                'othercharges':othercharges,
               'tempid':tempid,
               'temptext':temptext,
               'walletid':walletid,
              }
  
  
  
              fetch('/create-checkout-session/', {
                method: 'POST',
                headers: {'Content-type': 'application/json'},
                body: JSON.stringify(data),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
              })
              .then(function(response) {
  
                return response.json();
              })
              .then(function(session) {
                return stripe.redirectToCheckout({ sessionId: session.id });
              })
              .then(function(result) {
                // If `redirectToCheckout` fails due to a browser or network
                // error, you should display the localized error message to your
                // customer using `error.message`.
                if (result.error) {
                  alert(result.error.message);
                }
              })
              .catch(function(error) {
                console.error('Error:', error);
              });
            }
  }
 

  }
}


function refreshbutton(){
  var checkoutButton = document.getElementById('checkout-button');

  checkoutButton.disabled = false;
}


                   //function getpaymentmethod(){
                     
                    var checkoutButton = document.getElementById('checkout-button');




                    var checkoutButton = document.getElementById('checkout-button');
                    var hasExecuted = false; // Flag to track whether the code has been executed
                    var hasExecutedForExample = false; // Flag for the "for example" part
                    
                    checkoutButton.addEventListener('click', function() {
                        if (!hasExecuted) { // Check if the code has not been executed yet
                            checkoutButton.disabled = true;
                
                
                        var method1 = document.querySelector('input[name="availPayment"]:checked');
                
                        if (method1) {
                            var method = method1.value;
                
                            console.log("Method");
                            console.log(method);
                     var walletck = document.getElementById('CC-3');
                     var walletid = 0;
                     
                     // Flag to track button click
                     
                     if (walletck.checked) {
                     // freshvalue();
                       wallchnage();
                       console.log("3");
                     
                     } else {
                         walletid = 0;
                         console.log('Checkbox is not checked');
                     
                     
                       
                     
                  if (method === 'PayPal')
                     { 
                   
                        var radioButton = document.getElementById("CC-1");
                       // radioButton.checked = false;
                        var infoid = document.getElementById("infouser").value;
                        var bserviceid =document.getElementById("bserviceid").value;
                        var bplanid=document.getElementById("bplanid").value;
                        var othercharges=document.getElementById("orcs").innerHTML;
                   
                        window.location.href = `https://www.influencerhiring.com/paypalbutton/?infoid=${infoid}&bserviceid=${bserviceid}&bplanid=${bplanid}&othercharges=${othercharges}&tempid=${tempid}&temptext=${temptext}`; 
                   
                   
                     }
                   

                   
                   if (method === 'Credit / Debit Card (Stripe)'){
                    console.log("Cntent..........");
                    console.log(tempid);
                    console.log(temptext);


                    
                     console.log("Barawl");
                     var stripe = Stripe('pk_live_51MZ69BSEqjetbOctzEJCbXdu63iFQGlF3cQiNRpNMnLvlIj93QWzz6QjO6GYucIbsp4b1xGKjfH33jscYIFSn3KD00SrlrQRaa');
               
                       var radioButton = document.getElementById("CC-1");
                       //radioButton.checked = false;
                       var infoid = document.getElementById("infouser").value;
                       var bserviceid =document.getElementById("bserviceid").value;
                       var bplanid=document.getElementById("bplanid").value;
                       var othercharges=document.getElementById("orcs").innerHTML;
                      //  var tempid=document.getElementById("time").value; 
                      //var tempid=1;
                       console.log("tempid");
                       console.log(tempid); 
                       //var temptext="Rahul Barawa";
                      
                               data={
                                 'infoid':infoid,
                                 'bserviceid':bserviceid,
                                 'bplanid':bplanid,
                                 'othercharges':othercharges,
                                'tempid':tempid,
                                'temptext':temptext,
                                'walletid':walletid,
                               }
                   
                   
                   
                               fetch('/create-checkout-session/', {
                                 method: 'POST',
                                 headers: {'Content-type': 'application/json'},
                                 body: JSON.stringify(data),
                                 csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                               })
                               .then(function(response) {
                   
                                 return response.json();
                               })
                               .then(function(session) {
                                 return stripe.redirectToCheckout({ sessionId: session.id });
                               })
                               .then(function(result) {
                                 // If `redirectToCheckout` fails due to a browser or network
                                 // error, you should display the localized error message to your
                                 // customer using `error.message`.
                                 if (result.error) {
                                   alert(result.error.message);
                                 }
                               })
                               .catch(function(error) {
                                 console.error('Error:', error);
                               });
                           
                            }

                            if (method === 'UPI Payment') {

                              console.log("egasdfhadfda", method);
              
              
              
                          
                             
                             }
                          }
                          hasExecuted = true; 
                          }

                          if (typeof method === 'undefined') {
                            if (!hasExecutedForExample) { 
                        
                            console.log('You have no select an option');


                            var walletck = document.getElementById('CC-3');
                            var walletid = 0;
                
                            // Flag to track button click
                
                            if (walletck.checked) {
                
                
                             // freshvalue();
                                wallchnage();
                
                                console.log("3");
                
                            }
            hasExecutedForExample = true; // Set the flag to true after execution of the "for example" part
                          }
                          }
                        }
                        });
  //diableradio();

                          // }


                          // window.onload = getpaymentmethod;
                           window.onload = diableradio;
                          
function diableradio(){
 
  var role='{{request.user.roles}}';

  var county=null;
  if (role=='client'){
    county='{{request.user.clientprofile.country}}';

  }
  else if(role=='agency'){
    county='{{request.user.agencyprofile.country}}';



  }
  else{
    county='{{request.user.influencerprofile.country}}';

  }

  if(county==='India')
{
  var radio = document.getElementById('CC-0');
        radio.disabled = true;
  console.log("inner rahul execute");
  console.log(county);
}

else if(county==='None' ||  county===null ||  county==='')
{
  
  console.log("inner rahul execute");
  console.log(county);
  
}
else{
  var radio = document.getElementById('CC-2');
        radio.disabled = true;
}



console.log("outer rahul execute");
}
                          
                          
function redirecttourl(url){
  window.location.href=url;
}
                   </script>

                    <div class="card card_options border-0 mt-4">
                        <div class="quiz-window-header">
                            <h5 class="footer-widget__title text-white ms-1">What Happen When Purchase a Package?</h5>
                          </div>
                        <div class="card-body">
                            <div class="step_list">
                                 <ul id="progressbar">
                                    <li id="account"><i class="fas fa-check"></i> <strong>Place Order</strong></li>
                                    <li id="personal"><i class="fas fa-comments"></i><strong>Chat With Influencer</strong></li>
                                    <li id="payment"><i class="fas fa-thumbs-up"></i><strong>Receive Content</strong></li>
                                </ul>
                                <p class="text-center pe-0">If the seller doesn't respond in 7 days, the order will be automatically cancelled and your payment will be refunded in wallet.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        


    </div>
</section>
<script>


  function switchcart() {
    prebody.innerHTML=postbody.innerHTML;
    var x=document.getElementById("postbody");
    var y=document.getElementById("prebody");
  }


    function delwishlist(id){
      switchcart();
    
      $('#usercart').empty();
      $.ajax({
          type:'POST',
          url:'{% url "delmywhishlist" %}',
          data:
          {
            id:id,
            
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
          },
          success: function(response){
            console.log("Rahul");
            console.log(response);
            for (var key in response){
              console.log("Lkey");
              console.log(key);
              console.log("Lenght of the response");
              console.log(response[key].length);
                
if (response[key].length===0){
  var html1="";
  html1+=`
  <div class="cart-empty-content d-block">
                <img src="{%static 'images/wish_empty.webp'%}" class="cart-empty-img" alt="wishlist_empty_img" loading="lazy">
                <p class="empty-heading">Wishlist  Empty add your Favourite Influencers ..</p>
                <p class="cart-choice">Your Cart is empty add Influencers to it Now </p>
                <a href="/" target="_blank" class="explore-celeb-btn">Explore Influencers</a>
              </div>
              `
              $('#usercart').append(html1);
            }
            else{



                      for (var i=0; i<response[key].length;i++)
                      {
                        console.log("values");
                        console.log(response[key][0]);
                        var html="";
                        html+=`
                        <div class="row m-0 fadeout-box full-cart-div">
                          <div class="cart-box d-flex flex-wrap">
                            <div class="row">
                              <div class="col-3 p-0">
                              <div class="celeb-cart enter-booking-details">
                                <a href="/influencer/`+response[key][i][8]+`">
                                  <img src="/media/`+response[key][i][5]+`" alt="image" class="celeb-cart-img img-fluid">
                                </a>
                              </div>
                            </div>
                            <div class="col-9">
                              <div class="celeb-cart-detail">
                                <h3 class="cart-celeb-name enter-booking-details">`+response[key][i][0]+`</h3>
                                <div class="celeb-occasion-detail occasion-bottom d-flex mt-2 enter-booking-details">
                                  <div class="cart-occasion">
                                    <p class="cart-subheading">`+response[key][i][2]+`</p>
                                  </div>
                                </div>
                                <div class="celeb-prize-sec d-flex">
                                  <p class="celeb-amount">`+response[key][i][1]+`</p>
                                </div>
                              </div>
                            </div>
                            </div>
                          </div>
                          <div class="col-12 prime-applied-div">
                            <div class="coupen-code-sec">
                              <div class="coupen-code-div">
                                <p class="coupen-text">Starts from </p>
                                <p class="coupen-chip">₹`+response[key][i][3]+`</p>
                              </div>
                              <div class="coupen-prize-div">
                              <a href="javascript:checkwishlist(`+response[key][i][6]+`);"><img src="{%static 'images/Dustbin_Red.png'%}" alt="image" class="cart-delete-icon"></a>
                                </div>
                             
                            </div>
                          </div>
                         
                        </div>
                        `
                        $('#usercart').append(html);
                      }
                    }
                    }
          }
          })
        };

        
    function switchcart1() {
      prebody1.innerHTML=postbody2.innerHTML;
    }
  
    function delcart(id){
      switchcart1();
      
      $('#usercart3').empty();
      $.ajax({
          type:'POST',
          url:'{% url "delmycart" %}',
          data:
          {
            id:id,
           
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
          },
          success: function(response){
            console.log("Rahul");
            console.log(response);
            for (var key in response){
              console.log("Lkey");
              console.log(key);
              console.log("Lenght of the response");
              console.log(response[key].length);
             
              if (response[key].length===0){
                var html1="";
                html1+=`
                <div class="cart-empty-content d-block">
                  <img src="{%static 'images/cart_empty.webp'%}" class="cart-empty-img" alt="cart_empty_img" loading="lazy">
                  <p class="empty-heading">Cart Empty add Influencers ..</p>
                  <p class="cart-choice">Your Cart is empty add Influencers to it Now </p>
                  <a href="/" target="_blank" class="explore-celeb-btn">Add Influencers</a>
                </div>
                            `
                            $('#usercart3').append(html1);
                          }
                          else{


                      for (var i=0; i<response[key].length;i++)
                      {
                        console.log("values");
                        console.log(response[key][0]);
                        var html="";
                        html+=`
                        <div class="row m-0 fadeout-box full-cart-div">
                          <div class="cart-box d-flex flex-wrap">
                            <div class="row">
                              <div class="col-3 p-0">
                              <div class="celeb-cart enter-booking-details">
                                <a href="/influencer/`+response[key][i][8]+`">
                                  <img src="/media/`+response[key][i][5]+`" alt="image" class="celeb-cart-img img-fluid">
                                </a>
                              </div>
                            </div>
                            <div class="col-9">
                              <div class="celeb-cart-detail">
                                <h3 class="cart-celeb-name enter-booking-details">`+response[key][i][0]+`</h3>
                                <div class="celeb-occasion-detail occasion-bottom d-flex mt-2 enter-booking-details">
                                  <div class="cart-occasion">
                                    <p class="cart-subheading">`+response[key][i][2]+`</p>
                                  </div>
                                </div>
                                <div class="celeb-prize-sec d-flex justify-content-between align-items-center">
                                  
                                  <p class="celeb-amount">`+response[key][i][1]+`</p>
                                  <a href="/influencer/`+response[key][i][8]+`/" class="continue-btn mt-2">Continue</a>
                                  
                                </div>
                              </div>
                            </div>
                            </div>
                          </div>
                          <div class="col-12 prime-applied-div">
                            <div class="coupen-code-sec">
                              <div class="coupen-code-div">
                                <p class="coupen-text">Starts from </p>
                                <p class="coupen-chip">`+response[key][i][6]+` `+response[key][i][3]+`</p>
                              </div>
                              <div class="coupen-prize-div">
                              <a href="javascript:delcart(`+response[key][i][7]+`);"><img src="{%static 'images/Dustbin_Red.png'%}" alt="image" class="cart-delete-icon"></a>
                                </div>
                            </div>
                          </div>
                        </div>
                        `
                        $('#usercart3').append(html);
                      }
                     
                    }
                  }
          }
          })
        };
  
  
  
      </script>
    
     

{%endblock%}




     
