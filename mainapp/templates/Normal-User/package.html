
{% extends 'Normal-User/index.html' %}
{% load static %}
{% block title%}
<title>Influencer Hiring | Packages Details</title>
{% endblock %}
{%block head%}
<div class="header dash-header ">
{%endblock%}
{%block active%}
<li> <a href="/" class="">Home</a> </li>
<li> <a href="/influencers/" class="">Explore</a> </li>
<li> <a href="/blogs/" class="">Blogs</a> </li>
<li> <a href="/webstories/">Web-Stories</a> </li>
<li> <a href="/casting-call/">Casting Call</a> </li>
<li> <a href="/whitepaper/" class="">White Paper</a> </li>
{%endblock%}
{% block body %}

<section class="influncr_package  py-5">
    <div class="container">
        <div class="package_influncer_detail">
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="index-banner-img pe-5 d-inline-block">
                                <img src="/media/{{info.profileimage1}}" alt="{{info.fullname}}" class="img-fluid">
                            </div>
                        </div>
                        <div class="col-lg-8">
                            <h2 id="wish-video" class="sub_heading mb-3">
                                <span class="main-color position-relative">Paying to </span> <p>{{info.fullname}}</p>
                            </h2>
                            <p>{{info.short_description}}</p>
                            <input type="hidden" id="infouser" name="infouser" value="{{info.influencer_userid}}"/>
                            <input type="hidden" id="bplanid" name="bplanid" value="{{bsplanid}}"/>
                            <input type="hidden" id="bserviceid" name="bserviceid" value="{{serid}}"/>
                                                      
                        </div>
                    </div>

                    <div class="table_wrapper">
                       <div class="table basic">
                          
                           <div class="package-name Packages mt-0 fs-4 text-center mb-2">Package</div>
                           {% comment %} <div class="main_details text-center border-0 mb-2 px-3"> 
                        </div>  {% endcomment %}
                           <div class="features">
                               <li>
                                   <span class="list-name">Content Delivery</span>
                               </li>
                              
                                <li>
                                   <span class="list-name">Delivery Time</span>
                               </li>
                               
                               <li>
                                <span class="list-name">Fast Delivery Time</span>
                            </li>
                            <li>
                              <span class="list-name">Revised Work</span>
                          </li>
                               <li>
                                <span class="list-name">Total Amount</span>
                            </li>
                               
                           </div>
                       </div>
{%if selectplan == 'Basic' %}
                       <div class="table basic selected_price" id="basdiv">
{%else%}
<div class="table basic" id="basdiv">
    {%endif%}
                           <div class="price-section">
                               <div class="price-area">
                                   <div class="inner-area">
                                          <i class="fas fa-rocket"></i>
                                   </div>
                               </div>
                           </div>
                           <div class="package-name fs-4 text-center mb-2 main-color">Basic</div>
                           {% comment %} <div class="main_details text-center border-0 mb-2 px-3">
                            <h3 class="fs-6 border-0">110 TIKTOK</h3>
                            <h3 class="fs-6 border-0 mb-2">INFLUENCERS</h3> 
                          
                        </div>  {% endcomment %}
                           <div class="features">
                               <li>
                                   <span class="list-name">
                                    {%for i in basic.planperks%}
                                    <h3 class="fs-6 border-0 fw-normal">{{i}}</h3>
                                    {%endfor%}
                                   </span>
                               </li>
                               
                               <li>
                                   <div class="form-check" onclick="refreshgateways();getSelectedDelivery2('{{cur}}',{{basic.increasedprice}});changeamount({{taxper}},'{{cur}}',{{basic.increasedprice}});bplanidchanges({{basic.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioDefault" value=0 id="flexRadioDefault1" checked>
                                      <label class="form-check-label" for="flexRadioDefault1">
                                        {%if basic.duration_days == 1 %}
                                        {{basic.duration_days}} Day
                                        {%else%}
                                        {{basic.duration_days}} Days
                                      {%endif%}
                                      </label>
                                    </div>
                                </li>
                                <li>
                                    <div class="form-check" onclick="refreshgateways();getSelectedDelivery2('{{cur}}',{{basic.increasedprice}});changeamount({{taxper}},'{{cur}}',{{basic.increasedprice}});bplanidchanges({{basic.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioDefault" value={{basic.priorityprice}} id="flexRadioDefault2" >
                                      <label class="form-check-label" for="flexRadioDefault2">
                                        {%if basic.duration_days_exculsive == 1 %}
                                        {{basic.duration_days_exculsive}} Day (+{{cur}} {{basic.priorityprice}})
                                        {%else%}
                                        {{basic.duration_days_exculsive}} Days (+{{cur}} {{basic.priorityprice}})
                                      {%endif%}
                                      </label>
                                    </div>
                               </li>
                               <li>
                                <span class="list-name">
                                 <h3 class="fs-6 border-0 fw-normal">
                                  {% if basic.revisiontimes is None  %}
                                  <i class="fas fa-times text-danger"></i>

                                  {%else%}
                                  {{basic.revisiontimes}}
                                  {%endif%}
                                 </h3>
                                </span>
                            </li>
                               <li>
                                <span class="list-name">
                                 <h3 class="fs-6 border-0 fw-normal" id="baspr">{{cur}} {{basic.increasedprice}}</h3>
                                </span>
                            </li>
                            <script>

                           

                                function getSelectedDelivery2(cur=null,price=null) {
                                    const deliveryprice = document.querySelector('input[name="flexRadioDefault"]:checked').value;
                                    console.log("Rahul");
                                    console.log(deliveryprice);
                                                                
                                    console.log(cur);
                                    console.log(price);
                                    var totaolpr=price+parseInt(deliveryprice);
                                    var total= cur + " " + totaolpr.toString();
                                    console.log('totaolpr');
                                   
                                    console.log(totaolpr);
                                    console.log('total');

                                    console.log(total);
                                    document.getElementById("baspr").innerHTML=total;
                                  }


                                  function changeplan2() {          
                                    document.getElementById("basbut").innerHTML='Selected';
                                    
                                    var div = document.getElementById("basdiv");
                                    div.classList.add("selected_price");
                                    var div1 = document.getElementById("prediv");
                                    var div2 = document.getElementById("stadiv");
                                    div1.classList.remove("selected_price");
                                    div2.classList.remove("selected_price");
                                    document.getElementById("Stabut").innerHTML='Get Start';
                                    document.getElementById("prebut").innerHTML='Get Start';
                                    refreshgateways();
                                    
                                  }

                                  function changeamount(tax=null,cur=null,price=null)
                                  {
                                    changeplan2();
                                    var othercharges = document.querySelector('input[name="flexRadioDefault"]:checked').value;
                                    var total=parseInt(othercharges)+parseInt(price);
                                    othercharges=cur +" "+othercharges;
                                    var taxamount=total * (tax/100);
                                    taxamount=Math.ceil(taxamount * 100) / 100;
                                    var grandtotal=total+taxamount;

                                    grandtotal=Math.ceil(grandtotal).toFixed(2);
                                    taxamount=cur +" "+ taxamount.toString();
                                    grandtotal=cur +" "+ grandtotal.toString();
                                    var amount=cur +" "+price.toString();
                                    console.log('amount');
                                    console.log(amount);
                                    console.log('othercharges');
                                    console.log(othercharges);
                                    console.log('total');
                                    console.log(total);
                                    console.log('taxamount');
                                    console.log(taxamount);
                                    console.log('grandtotal');
                                    console.log(grandtotal);
                                    document.getElementById("bcpr").innerHTML=amount;
                                    document.getElementById("orcs").innerHTML=othercharges;
                                    document.getElementById("taxamt").innerHTML=taxamount;
                                    document.getElementById("amtapy").innerHTML=grandtotal;

                                   // getpaymentmethod();

                                  }

                            </script>

                               <div class="btn" onclick="refreshgateways();changeplan2();changeamount({{taxper}},'{{cur}}',{{basic.increasedprice}});bplanidchanges({{basic.planid}});removecode();">
                                

                                <button id="basbut">{%if selectplan == 'Basic' %}
                                    Selected
             {%else%}
             Get Start
                 {%endif%}</button>
                            </div>
                           </div>
                       </div>
                       {%if selectplan == 'Standard' %}
                       <div class="table basic selected_price" id="stadiv">
{%else%}
<div class="table basic" id="stadiv">
    {%endif%}


                           <div class="price-section">
                               <div class="price-area">
                                   <div class="inner-area">
                                      <i class="fas fa-award"></i>
                                   </div>
                               </div>
                           </div>
                           <div class="package-name fs-4 text-center mb-2 main-color">Standard</div>
                           
                           <div class="features">
                               <li>
                                   <span class="list-name">   {%for i in stand.planperks%}
                                    <h3 class="fs-6 border-0 fw-normal">{{i}}</h3>
                                    {%endfor%}</span>
                               </li>
                              
                               <li>
                                   <div class="form-check" onclick="refreshgateways();getSelectedDelivery1('{{cur}}',{{stand.increasedprice}});changeamount1({{taxper}},'{{cur}}',{{stand.increasedprice}});bplanidchanges({{stand.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioTwo" value=0 id="flexRadioTwo" checked>
                                      <label class="form-check-label" for="flexRadioTwo">
                                        
                                        {%if stand.duration_days == 1 %}
                                        {{stand.duration_days}} Day
                                        {%else%}
                                        {{stand.duration_days}} Days
                                      {%endif%}
                                      </label>
                                    </div>
                                </li>
                                <li>
                                    <div class="form-check" onclick="refreshgateways();getSelectedDelivery1('{{cur}}',{{stand.increasedprice}});changeamount1({{taxper}},'{{cur}}',{{stand.increasedprice}});bplanidchanges({{stand.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioTwo"  value={{stand.priorityprice}} id="flexRadioTwo" >
                                      <label class="form-check-label" for="flexRadioTwo">
                                        {%if stand.duration_days_exculsive == 1 %}
                                        {{stand.duration_days_exculsive}} Day (+{{cur}} {{stand.priorityprice}})
                                        {%else%}
                                        {{stand.duration_days_exculsive}} Days (+{{cur}} {{stand.priorityprice}})
                                      {%endif%}
                                      </label>
                                    </div>
                               </li>
                               <li>
                                <span class="list-name">
                                 <h3 class="fs-6 border-0 fw-normal">
                                  
                                  {% if stand.revisiontimes is None  %}
                                  <i class="fas fa-times text-danger"></i>

                                  {%else%}
                                  {{stand.revisiontimes}}
                                  {%endif%}
                                  
                                  
                                  </h3>



                                 
                                </span>
                            </li>
                               <li>
                                <span class="list-name">
                                 <h3 class="fs-6 border-0 fw-normal" id="stapr">{{cur}} {{stand.increasedprice}}</h3>
                                </span>
                            </li>


                            <script>
function bplanidchanges(value=null){
  document.getElementById("bplanid").value=value;
}


                                function getSelectedDelivery1(cur=null,price=null) {
                                    const deliveryprice = document.querySelector('input[name="flexRadioTwo"]:checked').value;
                                    console.log("Rahul");
                                    console.log(deliveryprice);
                                                                
                                    console.log(cur);
                                    console.log(price);
                                    var totaolpr=price+parseInt(deliveryprice);
                                    var total= cur + " " + totaolpr.toString();
                                   
                                    console.log(totaolpr);
                                    console.log(total);
                                    document.getElementById("stapr").innerHTML=total;
                                  }


                                  function changeplan1() {          
                                    document.getElementById("Stabut").innerHTML='Selected';
                                    var div = document.getElementById("stadiv");
                                    div.classList.add("selected_price");
                                    var div1 = document.getElementById("prediv");
                                    var div2 = document.getElementById("basdiv");
                                    div1.classList.remove("selected_price");
                                    div2.classList.remove("selected_price");
                                    document.getElementById("basbut").innerHTML='Get Start';
                                    document.getElementById("prebut").innerHTML='Get Start';
                                    refreshgateways();
                                    
                                  }

                                  function changeamount1(tax=null,cur=null,price=null)
                                  {
                                    changeplan1();
                                    var othercharges = document.querySelector('input[name="flexRadioTwo"]:checked').value;
                                    var total=parseInt(othercharges)+parseInt(price);
                                    othercharges=cur +" "+othercharges;
                                    var taxamount=total * (tax/100);
                                    taxamount=Math.ceil(taxamount * 100) / 100;
                                    var grandtotal=total+taxamount;

                                    grandtotal=Math.ceil(grandtotal).toFixed(2);
                                    taxamount=cur +" "+ taxamount.toString();
                                    grandtotal=cur +" "+ grandtotal.toString();
                                    var amount=cur +" "+price.toString();
                                    console.log('amount');
                                    console.log(amount);
                                    console.log('othercharges');
                                    console.log(othercharges);
                                    console.log('total');
                                    console.log(total);
                                    console.log('taxamount');
                                    console.log(taxamount);
                                    console.log('grandtotal');
                                    console.log(grandtotal);
                                    document.getElementById("bcpr").innerHTML=amount;
                                    document.getElementById("orcs").innerHTML=othercharges;
                                    document.getElementById("taxamt").innerHTML=taxamount;
                                    document.getElementById("amtapy").innerHTML=grandtotal;

                                   // getpaymentmethod();

                                  }


function removecode(){
  document.getElementById("couponcode").value = '';
  document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text saving_heading" >You have to apply couponcode for total savings on this order.</li>';
}

                            </script>




                            <div class="btn" onclick="refreshgateways();changeplan1();changeamount1({{taxper}},'{{cur}}',{{stand.increasedprice}});bplanidchanges({{stand.planid}});removecode();">
                                

                                <button id="Stabut">{%if selectplan == 'Standard' %}
                                    Selected
             {%else%}
             Get Start
                 {%endif%}</button>
                            </div>
                           </div>
                       </div>
                       {%if selectplan == 'Premium' %}
                       <div class="table basic selected_price" id="prediv">
{%else%}
<div class="table basic" id="prediv">
    {%endif%}

                           <div class="price-section">
                               <div class="price-area">
                                   <div class="inner-area">
                                         <i class="far fa-gem"></i>
                                   </div>
                               </div>
                           </div>
                           <div class="package-name fs-4 text-center mb-2 main-color">Premium</div>
                           {% comment %} <div class="main_details text-center border-0 mb-2 px-3">
                               <h3 class="fs-6 border-0">110 TIKTOK</h3>
                               <h3 class="fs-6 border-0 mb-2">INFLUENCERS</h3> 
                             
                           </div>  {% endcomment %}
                           <div class="features">
                               <li>
                                   <span class="list-name">{%for i in prem.planperks%}
                                    <h3 class="fs-6 border-0 fw-normal">{{i}}</h3>
                                    {%endfor%} </span>
                               </li>
                              
                               <li>
                                   <div class="form-check"  onclick="refreshgateways();getSelectedDelivery('{{cur}}',{{prem.increasedprice}});changeamount2({{taxper}},'{{cur}}',{{prem.increasedprice}});bplanidchanges({{prem.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioThree" value=0 id="flexRadioThree" checked>
                                      <label class="form-check-label" for="flexRadioThree">
                                        {%if prem.duration_days == 1 %}
                                        {{prem.duration_days}} Day
                                        {%else%}
                                        {{prem.duration_days}} Days
                                      {%endif%}
                                      </label>
                                    </div>
                                </li>
                                <li>
                                    <div class="form-check"  onclick="refreshgateways();getSelectedDelivery('{{cur}}',{{prem.increasedprice}});changeamount2({{taxper}},'{{cur}}',{{prem.increasedprice}});bplanidchanges({{prem.planid}});removecode();">
                                      <input class="form-check-input" type="radio" name="flexRadioThree" value={{prem.priorityprice}} id="flexRadioFour" >
                                      <label class="form-check-label" for="flexRadioFour">
                                        {%if prem.duration_days_exculsive == 1 %}
                                        {{prem.duration_days_exculsive}} Day (+{{cur}} {{prem.priorityprice}})
                                        {%else%}
                                        {{prem.duration_days_exculsive}} Days (+{{cur}} {{prem.priorityprice}})
                                      {%endif%}
                                      </label>
                                    </div>
                               </li>
                               <li>
                                <span class="list-name">
                                 <h3 class="fs-6 border-0 fw-normal">
                                  
                                  
                                  {% if prem.revisiontimes is None  %}
                                  <i class="fas fa-times text-danger"></i>

                                  {%else%}
                                  {{prem.revisiontimes}}
                                  {%endif%}

                                  
                                  </h3>
                                </span>
                            </li>
                               <li>
                                <span class="list-name" >
                                 <h3 class="fs-6 border-0 fw-normal" id="prempr">{{cur}} {{prem.increasedprice}}</h3>
                                 
                                </span>
                            </li>

                                <script>
                                    function getSelectedDelivery(cur=null,price=null) {
                                        const deliveryprice = document.querySelector('input[name="flexRadioThree"]:checked').value;
                                        console.log("Rahul");
                                        console.log(deliveryprice);
                                                                    
                                        console.log(cur);
                                        console.log(price);
                                        var totaolpr=price+parseInt(deliveryprice);
                                        var total= cur + " " + totaolpr.toString();
                                       
                                        console.log('totaolpr');

                                        console.log(totaolpr);
                                        console.log(total);
                                        console.log('total');

                                        document.getElementById("prempr").innerHTML=total;
                                        console.log('execute deli time');

                                      }


                                      function changeplan() {          
                                        document.getElementById("prebut").innerHTML='Selected';
                                        var div = document.getElementById("prediv");
                                        div.classList.add("selected_price");
                                        var div1 = document.getElementById("stadiv");
                                        var div2 = document.getElementById("basdiv");
                                        div1.classList.remove("selected_price");
                                        div2.classList.remove("selected_price");
                                        document.getElementById("basbut").innerHTML='Get Start';
                                        document.getElementById("Stabut").innerHTML='Get Start';
                                        console.log('execute chnage plan');
                                        refreshgateways();
                                        
                                      }
                                function changeamount2(tax=null,cur=null,price=null)
                                  {
                                    changeplan();
                                    var othercharges = document.querySelector('input[name="flexRadioThree"]:checked').value;
                                    var total=parseInt(othercharges)+parseInt(price);
                                    othercharges=cur +" "+othercharges;
                                    var taxamount=total * (tax/100);
                                    taxamount=Math.ceil(taxamount * 100) / 100;

                                    var grandtotal=total+taxamount;

                                    grandtotal=Math.ceil(grandtotal).toFixed(2);
                                    
                                    taxamount=cur +" "+ taxamount.toString();
                                    grandtotal=cur +" "+ grandtotal.toString();
                                    var amount=cur +" "+price.toString();
                                    console.log('amount');
                                    console.log(amount);
                                    console.log('othercharges');
                                    console.log(othercharges);
                                    console.log('total');
                                    console.log(total);
                                    console.log('taxamount');
                                    console.log(taxamount);
                                    console.log('grandtotal');
                                    console.log(grandtotal);
                                    document.getElementById("bcpr").innerHTML=amount;
                                    document.getElementById("orcs").innerHTML=othercharges;
                                    document.getElementById("taxamt").innerHTML=taxamount;
                                    document.getElementById("amtapy").innerHTML=grandtotal;

                                   // getpaymentmethod();


                                  }

                                </script>



                            <div class="btn" onclick="refreshgateways();changeplan();changeamount2({{taxper}},'{{cur}}',{{prem.increasedprice}});bplanidchanges({{prem.planid}});removecode();">
                                <button id="prebut">{%if selectplan == 'Premium' %}
                                    Selected
             {%else%}
             Get Start
                 {%endif%}</button>
                            </div>
                           </div>
                       </div>
                   </div>

                 


                   <div class="card refund-card p-3 mt-5 rounded-3 border-0">
                    <p class=""><span class="main-color fw-bold fs-5">{{refund.0.Title}}</span> {{refund.0.Description | safe}}</p>
                   </div>


                </div>
                <div class="col-md-4">
                    <div class="quiz-window">
                      <div class="quiz-window-header">
                        <h5 class="footer-widget__title text-white ms-1">Brand Promotion</h5>
                      </div>
                      <div class="quiz-window-body">
                        <div class="gui-window-awards">
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Price :</li>
                            <li class="guiz-awards-track" id="bcpr">{{cur}} {{prplan.increasedprice}}</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Other Charges :</li>
                            <li class="guiz-awards-track" id="orcs">{{cur}} {{other}}</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even">
                            <li class="guiz-awards-title">Tax :</li>
                            {% comment %} (+{{taxper}}%) {% endcomment %}
                            <li class="guiz-awards-track" id="taxamt">{{cur}} {{tax}}</li>
                          </ul>

                          <ul class="guiz-awards-row guiz-awards-row-even d-flex justify-content-between">
                            <li class="guiz-awards-title">
                                {% csrf_token %}
                                <input type="text" name="couponcode" class="form-control" id="couponcode" placeholder="Gift card or discount code"></li>
                            <li class="guiz-awards-track apply_code ms-2">
                                <input type="button" onclick="filter();" class="btn btn-block btn--outline-base" id="submitUpdatePledge" value="Apply">
                                <input type="hidden" id="coupused" name="coupused" value='true'/>
                            </li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even total-Payble">
                            <li class="guiz-awards-title fw-bold">Amount Payable :</li>
                            <li class="guiz-awards-track fw-bold" id="amtapy">{{cur}} {{total}}</li>
                          </ul>
                          <ul class="guiz-awards-row guiz-awards-row-even" id="saveline">
                            <li class="guiz-awards-title text saving_heading" >You have to apply couponcode for total savings on this order.</li>


                          </ul>
                        </div>
                    
                      </div>
                    </div>

                    <script>

function filter(){
    var ser=document.getElementById("couponcode").value;
    var bserviceid =document.getElementById("bserviceid").value;
 if (document.getElementById("coupused").value==='true'){
        $.ajax({
            type:'POST',
            url:'{% url "package" %}',
            data:
            {
                coupon:ser,
                serid:bserviceid,
              csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
            },
            success: function(response){
              console.log("Rahul");
              console.log(response['results']);

              
              var total=document.getElementById("amtapy").innerHTML;
              var cur=total.slice(0,3);
              var rup=parseFloat(document.getElementById("bcpr").innerHTML.slice(4,))+parseFloat(document.getElementById("orcs").innerHTML.slice(4,))+parseFloat(document.getElementById("taxamt").innerHTML.slice(4,));
              rup=Math.ceil(rup);
              var dis=rup * (response['results']/100);
              if (response['results']===0){
                document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have already used this couponcode.</li>';
              }
              else if(response['results']===-2){
                                    
                document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied expired couponcode.</li>';
              
              }
              else if(response['results']===-3){
                                    
                document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied wrong couponcode.</li>';
              
              }
              else if(response['results']===-4){
                                    
                document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-danger saving_heading" >Your have applied couponcode exceeded the upper limit.</li>';
              
              }
              else {
                
                dis=Math.ceil(dis * 100) / 100;
                var grandtotal=parseInt(rup)-dis;
                grandtotal=Math.ceil(grandtotal * 100) / 100;
                dis=cur +" "+ dis.toString();
                grandtotal=cur +" "+ grandtotal.toString();
                console.log('total');
                console.log(total);
                console.log("discount");
                console.log(dis);
                console.log('grandtotal');
                console.log(grandtotal);
                document.getElementById("amtapy").innerHTML=grandtotal;
                document.getElementById("saveline").innerHTML='<li class="guiz-awards-title text-success saving_heading" >Your Total Savings on this order '+dis+'</li>';
                //getpaymentmethod();
    
              }
             

            }
          
           
            })
          }
    };





                    </script>


                    <div class="payment_mode mt-4">
                   <!--  <h5 class="footer-widget__title fs-4 text--base ms-1 mb-sm-3 mb-2 pb-1"></h5> -->
                        <div class="row">
                            <div class="quiz-window-header">
                                <h5 class="footer-widget__title text-white ms-1">Payment Methods</h5>
                              </div>
                            <div class="col-md-12" >
                                <div class="radio form-group"  id="paymentDiv" >
                                    <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-0" type="radio" name="availPayment" value="PayPal"  >
                                        <label for="CC-0" class="ms-2">PayPal</label>
                                    </div>
                                    <img src="{%static 'images/paypal.png'%}" alt="paypal" class="img-fluid">
                                </div>
                                
                                <div class="radio form-group" >
                                    <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-1" type="radio" name="availPayment" value="Credit / Debit Card (Stripe)" checked >
                                        <label for="CC-1" class="ms-2">Credit / Debit Card</label>
                                    </div>
                                    <img src="{%static 'images/strip.png'%}" alt="strip" class="img-fluid">
                                </div>
                                {%csrf_token%}
                                <div class="radio form-group" >
                                    <div class="d-flex" onclick="refreshbutton();">
                                        <input id="CC-2" type="radio" name="availPayment" value="UPI Payment"  disabled >
                                        <label for="CC-2" class="ms-2">UPI Payments</label>
                                    </div>
                                    <img src="{%static 'images/upi-payment.png'%}" alt="UPI" class="img-fluid">
                                </div>
                                
                                <!-- <div class="radio form-group" >
                                    <div class="d-flex" onclick="getpaymentmethod();">
                                        <input id="CC-3" type="radio" name="availPayment" value="Net Banking" >
                                        <label for="CC-3" class="ms-2">Net Banking</label>
                                    </div>
                                    <img src="{%static 'images/razorpay.png'%}" alt="razorpay" class="img-fluid">
                                </div> -->

                                <div class="radio form-group" >
                                  <div class="d-flex"  >
                                      <input id="CC-3" type="checkbox" value="Wallet"  onclick="freshvalue();refreshbutton();disableother();" >
                                      <label for="CC-3" class="mx-2">Wallet</label>

                                      <span>{{request.user.clientpayout.currency}} {{request.user.clientpayout.remaining_balance_bank}}</span>

                                  </div>

                                  <img src="{%static 'images/wallet.jpg'%}" alt="wallet" class="img-fluid">
                              </div>


                                
                                <div class="guiz-awards-buttons p-0 pb-3" >
                                  <button type="button"  class="btn btn-block btn--outline-base" id="checkout-button" > Pay Now </button>
                                </div>
                            </div>
                        </div>
                   </div>
                   <script src="https://js.stripe.com/v3/"></script>
<script type="text/javascript">


function refreshgateways(){
  var maleRadio = document.getElementById("CC-1");

// Set the 'checked' property to false to uncheck the radio button
maleRadio.checked = "";
//var// maleRadio1 = document.getElementById("CC-2");

// Set the 'checked' property to "" to uncheck the radio button
//maleRadio1.checked = true;
var maleRadio2 = document.getElementById("CC-0");

// Set the 'checked' property to "" to uncheck the radio button
maleRadio2.checked = "";
}



function freshvalue(){
  var maleRadio = document.getElementById("CC-1");
    
    // Set the 'checked' property to false to uncheck the radio button
    maleRadio.checked = "";
    //var// maleRadio1 = document.getElementById("CC-2");
    
    // Set the 'checked' property to "" to uncheck the radio button
   // maleRadio1.checked = "";
    var maleRadio2 = document.getElementById("CC-0");
    
    // Set the 'checked' property to "" to uncheck the radio button
    maleRadio2.checked = "";
}



function disableother(){
  wallamt = '{{request.user.clientpayout.remaining_balance_bank}}';
  var reqamt = 0;
  reqamt = parseFloat(document.getElementById("amtapy").innerHTML.slice(4,));
  

  var walletck = document.getElementById('CC-3');


  if (walletck.checked) {

  if (wallamt >= reqamt) {

  var maleRadio = document.getElementById("CC-1");
    
    // Set the 'checked' property to false to uncheck the radio button
    maleRadio.disabled = true;
    //var// maleRadio1 = document.getElementById("CC-2");
    
    // Set the 'checked' property to "" to uncheck the radio button
    //maleRadio1.disabled = true;
    console.log('rahualcczx csdfradio ');

  }

 
}
else
{
  var maleRadio = document.getElementById("CC-1");
  
  // Set the 'checked' property to false to uncheck the radio button
  maleRadio.disabled = false;
  //var// maleRadio1 = document.getElementById("CC-2");
  
  // Set the 'checked' property to "" to uncheck the radio button
 // maleRadio1.disabled = false;
}

}





function wallchnage(){


  var walletid = 0;
var wallamt = 0;
  var buttonClicked = false; 
  walletid = `{{request.user.clientpayout.payoutid}}`;
  wallamt = '{{request.user.clientpayout.remaining_balance_bank}}';
  var reqamt = 0;
  reqamt = parseFloat(document.getElementById("amtapy").innerHTML.slice(4,));
  
  if (wallamt >= reqamt) {
    



              // Your custom click event handler code here
              var infoid = document.getElementById("infouser").value;
              var bserviceid = document.getElementById("bserviceid").value;
              var bplanid = document.getElementById("bplanid").value;
              var othercharges = document.getElementById("orcs").innerHTML;
              othercharges = othercharges.slice(4);

              $.ajax({
                  type: 'POST',
                  url: '{% url "Walletpurchase" %}',
                  headers: {
                      'X-CSRFToken': $('input[name="csrfmiddlewaretoken"]').val()
                  },
                  data: {
                      walletid: walletid,
                      infoid: infoid,
                      bserviceid: bserviceid,
                      bplanid: bplanid,
                      othercharges: othercharges,
                      
                  },
                  success: function(response) {
                      console.log("Rahul");
                      console.log(response[0]);

                      if (response['results'] === 'ok') {
                          redirecttourl('/payment-wallet-success/');
                      }
                  }
              })

              console.log('Button clicked with new id!');
        
      
  }
  else
  {
    console.log('2');

    console.log('You have insufficient balance to process your order.');

  
    var method = document.querySelector('input[name="availPayment"]:checked');

    console.log(method);
    if (method === null) {
      // The value is null
      console.log('You have not selected another option');

      alert('You have minimum balance in your wallet, select another method with wallet to use it.');
    }

    else{

      method= method.value;
    if (method === 'PayPal')

    {
      
     

  
  
       var radioButton = document.getElementById("CC-1");
      // radioButton.checked = false;
       var infoid = document.getElementById("infouser").value;
       var bserviceid =document.getElementById("bserviceid").value;
       var bplanid=document.getElementById("bplanid").value;
       var othercharges=document.getElementById("orcs").innerHTML;
  
       othercharges=othercharges.slice(4);
       console.log(othercharges);
  
  window.location.href = `https://www.influencerhiring.com/paypalbutton/?infoid=${infoid}&bserviceid=${bserviceid}&bplanid=${bplanid}&othercharges=${othercharges}`; 



  
    }
  
    
  
  
  
  
   else if (method === 'Credit / Debit Card (Stripe)')
  {

    

    var stripe = Stripe('pk_live_51MZ69BSEqjetbOctzEJCbXdu63iFQGlF3cQiNRpNMnLvlIj93QWzz6QjO6GYucIbsp4b1xGKjfH33jscYIFSn3KD00SrlrQRaa');
    
      // Create a new Checkout Session using the server-side endpoint you
      // created in step 3.
      var radioButton = document.getElementById("CC-1");
     // radioButton.checked = false;
      var infoid = document.getElementById("infouser").value;
      var bserviceid =document.getElementById("bserviceid").value;
      var bplanid=document.getElementById("bplanid").value;
      var othercharges=document.getElementById("orcs").innerHTML;
  
     
              data={
                'infoid':infoid,
                'bserviceid':bserviceid,
                'bplanid':bplanid,
                'othercharges':othercharges,
                'walletid':walletid,
              }
  
  
  
              fetch('/create-checkout-session/', {
                method: 'POST',
                headers: {'Content-type': 'application/json'},
                body: JSON.stringify(data),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
              })
              .then(function(response) {
  
                return response.json();
              })
              .then(function(session) {
                return stripe.redirectToCheckout({ sessionId: session.id });
              })
              .then(function(result) {
                // If `redirectToCheckout` fails due to a browser or network
                // error, you should display the localized error message to your
                // customer using `error.message`.
                if (result.error) {
                  alert(result.error.message);
                }
              })
              .catch(function(error) {
                console.error('Error:', error);
              });
      

  }
 
    }
  }
}


function refreshbutton(){
  var checkoutButton = document.getElementById('checkout-button');

  checkoutButton.disabled = false;
}




//function getpaymentmethod() {


  var checkoutButton = document.getElementById('checkout-button');
  var hasExecuted = false; // Flag to track whether the code has been executed
  var hasExecutedForExample = false; // Flag for the "for example" part
  
  checkoutButton.addEventListener('click', function() {
      if (!hasExecuted) { // Check if the code has not been executed yet
          checkoutButton.disabled = true;
  
          var method1 = document.querySelector('input[name="availPayment"]:checked');
  
          if (method1) {
              var method = method1.value;
  
              console.log("Method");
              console.log(method);
  
              var walletck = document.getElementById('CC-3');
              var walletid = 0;
  
              // Flag to track button click
  
              if (walletck.checked) {
                 // freshvalue();
                  wallchnage();
                  console.log("inner wallet");
              } else {
                  walletid = 0;
                  console.log('Checkbox is not checked');
  
                  if (method === 'PayPal') {
                      var radioButton = document.getElementById("CC-1");
                      var infoid = document.getElementById("infouser").value;
                      var bserviceid = document.getElementById("bserviceid").value;
                      var bplanid = document.getElementById("bplanid").value;
                      var othercharges = document.getElementById("orcs").innerHTML;
  
                      othercharges = othercharges.slice(4);
                      console.log(othercharges);
  
                      window.location.href = `https://www.influencerhiring.com/paypalbutton/?infoid=${infoid}&bserviceid=${bserviceid}&bplanid=${bplanid}&othercharges=${othercharges}`;
                  }
  
                  if (method === 'Credit / Debit Card (Stripe)') {
                      var stripe = Stripe('pk_live_51MZ69BSEqjetbOctzEJCbXdu63iFQGlF3cQiNRpNMnLvlIj93QWzz6QjO6GYucIbsp4b1xGKjfH33jscYIFSn3KD00SrlrQRaa');
                      var radioButton = document.getElementById("CC-1");
                      var infoid = document.getElementById("infouser").value;
                      var bserviceid = document.getElementById("bserviceid").value;
                      var bplanid = document.getElementById("bplanid").value;
                      var othercharges = document.getElementById("orcs").innerHTML;
  
                      data = {
                          'infoid': infoid,
                          'bserviceid': bserviceid,
                          'bplanid': bplanid,
                          'othercharges': othercharges,
                          'walletid': walletid,
                      }
  
                      fetch('/create-checkout-session/', {
                              method: 'POST',
                              headers: {
                                  'Content-type': 'application/json'
                              },
                              body: JSON.stringify(data),
                              csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                          })
                          .then(function(response) {
                              return response.json();
                          })
                          .then(function(session) {
                              return stripe.redirectToCheckout({
                                  sessionId: session.id
                              });
                          })
                          .then(function(result) {
                              if (result.error) {
                                  alert(result.error.message);
                              }
                          })
                          .catch(function(error) {
                              console.error('Error:', error);
                          });
                  }
  
                  if (method === 'UPI Payment') {
                      console.log("egasdfhadfda", method);
                  }
              }
  
              hasExecuted = true; // Set the flag to true after execution
          }
          console.log("method",method);
          if (typeof method === 'undefined') {
            if (!hasExecutedForExample) { // Check if the "for example" part has not been executed yet
            var walletck = document.getElementById('CC-3');
            var walletid = 0;

            // Flag to track button click

            if (walletck.checked) {
               // freshvalue();
                wallchnage();
                console.log("outer wallet");
            }

            hasExecutedForExample = true; // Set the flag to true after execution of the "for example" part
        }
        }

      }
  });
  
  //diableradio();

//}


//window.onload = getpaymentmethod;
window.onload = diableradio;


                       
function diableradio(){
 
  var role='{{request.user.roles}}';

  var county=null;
  if (role=='client'){
    county='{{request.user.clientprofile.country}}';

  }
  else if(role=='agency'){
    county='{{request.user.agencyprofile.country}}';



  }
  else{
    county='{{request.user.influencerprofile.country}}';

  }

  if(county==='India')
{
  var radio = document.getElementById('CC-0');
        radio.disabled = true;
  console.log("inner rahul execute");
  console.log(county);
}

else if(county==='None' ||  county===null ||  county==='')
{
  
  console.log("inner rahul execute");
  console.log(county);

}
else{
  var radio = document.getElementById('CC-2');
        radio.disabled = true;
}



console.log("outer rahul execute");
}



function redirecttourl(url){
  window.location.href=url;
}



</script>





                    <div class="card card_options border-0 mt-4">
                        <div class="quiz-window-header">
                            <h5 class="footer-widget__title text-white ms-1">What Happen When Purchase a Package?</h5>
                          </div>
                        <div class="card-body">
                            <div class="step_list">
                                 <ul id="progressbar">
                                    <li id="account"><i class="fas fa-check"></i> <strong>Place Order</strong></li>
                                    <li id="personal"><i class="fas fa-comments"></i><strong>Chat With Influencer</strong></li>
                                    <li id="payment"><i class="fas fa-thumbs-up"></i><strong>Receive Content</strong></li>
                                </ul>
                                <p class="text-center pe-0">If the seller doesn't respond in 7 days, the order will be automatically cancelled and your payment will be refunded in wallet.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        


    </div>
</section>


<script>


  function switchcart() {
    prebody.innerHTML=postbody.innerHTML;
    var x=document.getElementById("postbody");
    var y=document.getElementById("prebody");
  }






    function delwishlist(id){
      switchcart();
    
      $('#usercart').empty();
      $.ajax({
          type:'POST',
          url:'{% url "delmywhishlist" %}',
          data:
          {
            id:id,
            
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
          },
          success: function(response){
            console.log("Rahul");
            console.log(response);
            for (var key in response){
              console.log("Lkey");
              console.log(key);
              console.log("Lenght of the response");
              console.log(response[key].length);
                
if (response[key].length===0){
  var html1="";
  html1+=`
  <div class="cart-empty-content d-block">
                <img src="{%static 'images/wish_empty.webp'%}" class="cart-empty-img" alt="wishlist_empty_img" loading="lazy">
                <p class="empty-heading">Wishlist  Empty add your Favourite Influencers ..</p>
                <p class="cart-choice">Your Cart is empty add Influencers to it Now </p>
                <a href="/" target="_blank" class="explore-celeb-btn">Explore Influencers</a>
              </div>
              `
              $('#usercart').append(html1);
            }
            else{



                      for (var i=0; i<response[key].length;i++)
                      {
                        console.log("values");
                        console.log(response[key][0]);
                        var html="";
                        html+=`
                        <div class="row m-0 fadeout-box full-cart-div">
                          <div class="cart-box d-flex flex-wrap">
                            <div class="row">
                              <div class="col-3 p-0">
                              <div class="celeb-cart enter-booking-details">
                                <a href="/add-to-cart/get-cart-booking-details/cart-item-64876">
                                  <img src="/media/`+response[key][i][5]+`" alt="image" class="celeb-cart-img img-fluid">
                                </a>
                              </div>
                            </div>
                            <div class="col-9">
                              <div class="celeb-cart-detail">
                                <h3 class="cart-celeb-name enter-booking-details">`+response[key][i][0]+`</h3>
                                <div class="celeb-occasion-detail occasion-bottom d-flex mt-2 enter-booking-details">
                                  <div class="cart-occasion">
                                    <p class="cart-subheading">`+response[key][i][2]+`</p>
                                  </div>
                                </div>
                                <div class="celeb-prize-sec d-flex">
                                  <p class="celeb-amount">`+response[key][i][1]+`</p>
                                </div>
                              </div>
                            </div>
                            </div>
                          </div>
                          <div class="col-12 prime-applied-div">
                            <div class="coupen-code-sec">
                              <div class="coupen-code-div">
                                <p class="coupen-text">Starts from </p>
                                <p class="coupen-chip">`+response[key][i][3]+`</p>
                              </div>
                              <div class="coupen-prize-div">
                              <a href="javascript:checkwishlist(`+response[key][i][6]+`);"><img src="{%static 'images/Dustbin_Red.png'%}" alt="image" class="cart-delete-icon"></a>
                                </div>
                             
                            </div>
                          </div>
                         
                        </div>
                        `
                        $('#usercart').append(html);
                      }
                    }
                    }
          }
          })
        };
        
    function switchcart1() {
      prebody1.innerHTML=postbody2.innerHTML;
    }
  
    function delcart(id){
      switchcart1();
      
      $('#usercart3').empty();
      $.ajax({
          type:'POST',
          url:'{% url "delmycart" %}',
          data:
          {
            id:id,
           
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
          },
          success: function(response){
            console.log("Rahul");
            console.log(response);
                  for (var key in response){
              console.log("Lkey");
              console.log(key);
              console.log("Lenght of the response");
              console.log(response[key].length);
             
              if (response[key].length===0){
                var html1="";
                html1+=`
                <div class="cart-empty-content d-block">
                  <img src="{%static 'images/cart_empty.webp'%}" class="cart-empty-img" alt="cart_empty_img" loading="lazy">
                  <p class="empty-heading">Cart Empty add Influencers ..</p>
                  <p class="cart-choice">Your Cart is empty add Influencers to it Now </p>
                  <a href="/" target="_blank" class="explore-celeb-btn">Add Influencers</a>
                </div>
                            `
                            $('#usercart3').append(html1);
                          }
                          else{


                      for (var i=0; i<response[key].length;i++)
                      {
                        console.log("values");
                        console.log(response[key][0]);
                        var html="";
                        html+=`
                        <div class="row m-0 fadeout-box full-cart-div">
                          <div class="cart-box d-flex flex-wrap">
                            <div class="row">
                              <div class="col-3 p-0">
                              <div class="celeb-cart enter-booking-details">
                                <a href="/add-to-cart/get-cart-booking-details/cart-item-64876">
                                  <img src="/media/`+response[key][i][5]+`" alt="image" class="celeb-cart-img img-fluid">
                                </a>
                              </div>
                            </div>
                            <div class="col-9">
                              <div class="celeb-cart-detail">
                                <h3 class="cart-celeb-name enter-booking-details">`+response[key][i][0]+`</h3>
                                <div class="celeb-occasion-detail occasion-bottom d-flex mt-2 enter-booking-details">
                                  <div class="cart-occasion">
                                    <p class="cart-subheading">`+response[key][i][2]+`</p>
                                  </div>
                                </div>
                                <div class="celeb-prize-sec d-flex justify-content-between align-items-center">
                                  
                                  <p class="celeb-amount">`+response[key][i][1]+`</p>
                                  <a href="/influencer/`+response[key][i][8]+`/" class="continue-btn mt-2">Continue</a>
                                  
                                </div>
                              </div>
                            </div>
                            </div>
                          </div>
                          <div class="col-12 prime-applied-div">
                            <div class="coupen-code-sec">
                              <div class="coupen-code-div">
                                <p class="coupen-text">Starts from </p>
                                <p class="coupen-chip">`+response[key][i][6]+` `+response[key][i][3]+`</p>
                              </div>
                              <div class="coupen-prize-div">
              <a href="javascript:delcart(`+response[key][i][7]+`);"><img src="{%static 'images/Dustbin_Red.png'%}" alt="image" class="cart-delete-icon"></a>
                                </div>
                            </div>
                          </div>
                        </div>
                        `
                        $('#usercart3').append(html);
                      }
                     
                    }
                  }
    
          }
          })
        };
  
  
  
      </script>


{% endblock %}