{% extends 'SEO/blog-insert.html' %}
{% load static %}
{% block title%}
<title>Influencer Hiring | Blog Comments Status</title>
{% endblock %}

{%block sidebar%}
<div class="app-sidebar-menu overflow-hidden flex-column-fluid">
	<div id="kt_app_sidebar_menu_wrapper" class="app-sidebar-wrapper hover-scroll-overlay-y my-5" data-kt-scroll="true"
		data-kt-scroll-activate="true" data-kt-scroll-height="auto"
		data-kt-scroll-dependencies="#kt_app_sidebar_logo, #kt_app_sidebar_footer"
		data-kt-scroll-wrappers="#kt_app_sidebar_menu" data-kt-scroll-offset="5px" data-kt-scroll-save-state="true">
		<div class="menu menu-column menu-rounded menu-sub-indention px-3" id="#kt_app_sidebar_menu" data-kt-menu="true"
			data-kt-menu-expand="false">
			<div class="menu-item"> <a class="menu-link" href="/BlogsHome/"> <span class="menu-icon"> <span
							class="svg-icon svg-icon-2">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<rect x="2" y="2" width="9" height="9" rx="2" fill="currentColor" />
								<rect opacity="0.3" x="13" y="2" width="9" height="9" rx="2" fill="currentColor" />
								<rect opacity="0.3" x="13" y="13" width="9" height="9" rx="2" fill="currentColor" />
								<rect opacity="0.3" x="2" y="13" width="9" height="9" rx="2" fill="currentColor" />
							</svg>
						</span> </span> <span class="menu-title">Explore Blogs</span> </a> </div>

			<!--begin:Menu item-->
			<div class="menu-item pt-5">
				<!--begin:Menu content-->
				<div class="menu-content">
					<span class="menu-heading fw-bold text-uppercase fs-7">Pages</span>
				</div>
				<!--end:Menu content-->
			</div>
			<!--end:Menu item-->


			<div data-kt-menu-trigger="click" class="menu-item menu-accordion"> <span class="menu-link"> <span
						class="menu-icon"> <span class="svg-icon svg-icon-2">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<path
									d="M20 19.725V18.725C20 18.125 19.6 17.725 19 17.725H5C4.4 17.725 4 18.125 4 18.725V19.725H3C2.4 19.725 2 20.125 2 20.725V21.725H22V20.725C22 20.125 21.6 19.725 21 19.725H20Z"
									fill="currentColor"></path>
								<path opacity="0.3"
									d="M22 6.725V7.725C22 8.325 21.6 8.725 21 8.725H18C18.6 8.725 19 9.125 19 9.725C19 10.325 18.6 10.725 18 10.725V15.725C18.6 15.725 19 16.125 19 16.725V17.725H15V16.725C15 16.125 15.4 15.725 16 15.725V10.725C15.4 10.725 15 10.325 15 9.725C15 9.125 15.4 8.725 16 8.725H13C13.6 8.725 14 9.125 14 9.725C14 10.325 13.6 10.725 13 10.725V15.725C13.6 15.725 14 16.125 14 16.725V17.725H10V16.725C10 16.125 10.4 15.725 11 15.725V10.725C10.4 10.725 10 10.325 10 9.725C10 9.125 10.4 8.725 11 8.725H8C8.6 8.725 9 9.125 9 9.725C9 10.325 8.6 10.725 8 10.725V15.725C8.6 15.725 9 16.125 9 16.725V17.725H5V16.725C5 16.125 5.4 15.725 6 15.725V10.725C5.4 10.725 5 10.325 5 9.725C5 9.125 5.4 8.725 6 8.725H3C2.4 8.725 2 8.325 2 7.725V6.725L11 2.225C11.6 1.925 12.4 1.925 13.1 2.225L22 6.725ZM12 3.725C11.2 3.725 10.5 4.425 10.5 5.225C10.5 6.025 11.2 6.725 12 6.725C12.8 6.725 13.5 6.025 13.5 5.225C13.5 4.425 12.8 3.725 12 3.725Z"
									fill="currentColor"></path>
							</svg>
						</span> </span> <span class="menu-title">Blogs Upload</span><span
						class="menu-arrow"></span></span>
				<div class="menu-sub menu-sub-accordion">
					<div class="menu-item"> <a class="menu-link" href="/InsertBlog/"><span class="menu-bullet"><span
									class="bullet bullet-dot"></span> </span> <span class="menu-title">Insert
								Blogs</span></a></div>
								<div class="menu-item"> <a class="menu-link" href="/addblogcontent/"><span class="menu-bullet"><span
									class="bullet bullet-dot"></span> </span> <span class="menu-title">Insert Blogs Content</span></a>
							</div>
				</div>
			</div>

			<div data-kt-menu-trigger="click" class="menu-item show menu-accordion"> <span class="menu-link"> <span
						class="menu-icon"> <span class="svg-icon svg-icon-2">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<path opacity="0.3"
									d="M7 20.5L2 17.6V11.8L7 8.90002L12 11.8V17.6L7 20.5ZM21 20.8V18.5L19 17.3L17 18.5V20.8L19 22L21 20.8Z"
									fill="currentColor"></path>
								<path d="M22 14.1V6L15 2L8 6V14.1L15 18.2L22 14.1Z" fill="currentColor"></path>
							</svg>
						</span> </span> <span class="menu-title">Blog Comments</span><span
						class="menu-arrow"></span></span>
				<div class="menu-sub menu-sub-accordion">
					<div class="menu-item"> <a class="menu-link active" href="/Blog-Comments-Status/"><span
								class="menu-bullet"><span class="bullet bullet-dot"></span> </span> <span
								class="menu-title">Approve Comments</span></a></div>
				</div>
			</div>

			<div data-kt-menu-trigger="click" class="menu-item menu-accordion"> <span class="menu-link"> <span
						class="menu-icon"> <span class="svg-icon svg-icon-2">
							<svg width="24" height="24" viewBox="0 0 24 24" fill="none"
								xmlns="http://www.w3.org/2000/svg">
								<path opacity="0.3"
									d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
									fill="currentColor"></path>
								<path
									d="M8.70001 6C8.10001 5.7 7.39999 5.40001 6.79999 5.10001C7.79999 4.00001 8.90001 3 10.1 2.2C10.7 2.1 11.4 2 12 2C12.7 2 13.3 2.1 13.9 2.2C12 3.2 10.2 4.5 8.70001 6ZM12 8.39999C13.9 6.59999 16.2 5.30001 18.7 4.60001C18.1 4.00001 17.4 3.6 16.7 3.2C14.4 4.1 12.2 5.40001 10.5 7.10001C11 7.50001 11.5 7.89999 12 8.39999ZM7 20C7 20.2 7 20.4 7 20.6C6.2 20.1 5.49999 19.6 4.89999 19C4.59999 18 4.00001 17.2 3.20001 16.6C2.80001 15.8 2.49999 15 2.29999 14.1C4.99999 14.7 7 17.1 7 20ZM10.6 9.89999C8.70001 8.09999 6.39999 6.9 3.79999 6.3C3.39999 6.9 2.99999 7.5 2.79999 8.2C5.39999 8.6 7.7 9.80001 9.5 11.6C9.8 10.9 10.2 10.4 10.6 9.89999ZM2.20001 10.1C2.10001 10.7 2 11.4 2 12C2 12 2 12 2 12.1C4.3 12.4 6.40001 13.7 7.60001 15.6C7.80001 14.8 8.09999 14.1 8.39999 13.4C6.89999 11.6 4.70001 10.4 2.20001 10.1ZM11 20C11 14 15.4 9.00001 21.2 8.10001C20.9 7.40001 20.6 6.8 20.2 6.2C13.8 7.5 9 13.1 9 19.9C9 20.4 9.00001 21 9.10001 21.5C9.80001 21.7 10.5 21.8 11.2 21.9C11.1 21.3 11 20.7 11 20ZM19.1 19C19.4 18 20 17.2 20.8 16.6C21.2 15.8 21.5 15 21.7 14.1C19 14.7 16.9 17.1 16.9 20C16.9 20.2 16.9 20.4 16.9 20.6C17.8 20.2 18.5 19.6 19.1 19ZM15 20C15 15.9 18.1 12.6 22 12.1C22 12.1 22 12.1 22 12C22 11.3 21.9 10.7 21.8 10.1C16.8 10.7 13 14.9 13 20C13 20.7 13.1 21.3 13.2 21.9C13.9 21.8 14.5 21.7 15.2 21.5C15.1 21 15 20.5 15 20Z"
									fill="currentColor"></path>
							</svg>
						</span> </span> <span class="menu-title">Total Blogs</span><span
						class="menu-arrow"></span></span>
				<div class="menu-sub menu-sub-accordion">
					<div class="menu-item"> <a class="menu-link" href="/Blog-Edit/"><span class="menu-bullet"><span
									class="bullet bullet-dot"></span> </span> <span class="menu-title">Blogs
								List</span></a></div>
								<div class="menu-item"> <a class="menu-link" href="/Blog-Content/"><span class="menu-bullet"><span
									class="bullet bullet-dot"></span> </span> <span class="menu-title">Blogs Content</span></a></div>
				</div>
			</div>
		</div>
	</div>
</div>
{%endblock%}

{% block body %}
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
	<div class="d-flex flex-column flex-column-fluid">
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<div id="kt_app_toolbar_container" class="app-container container-fluid d-flex flex-stack">
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Blog
						Comments </h1>
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<li class="breadcrumb-item text-muted"> <a href="index.html"
								class="text-muted text-hover-primary">Home</a> </li>
						<li class="breadcrumb-item"> <span class="bullet bg-gray-400 w-5px h-2px"></span> </li>
						<li class="breadcrumb-item text-muted">Blog Comments Status</li>
					</ul>
				</div>
			</div>
		</div>
		<div id="kt_app_content" class="app-content flex-column-fluid">
			<div id="kt_app_content_container" class="app-container container-fluid">
				<div class="card">
					<!--begin::Card header-->
					<div class="card-header border-0 pt-6">
						<!--begin::Card title-->
						<div class="card-title">
							<!--begin::Search-->
							<div class="d-flex align-items-center position-relative my-1">
								<!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
								<span class="svg-icon svg-icon-1 position-absolute ms-6">
									<svg width="24" height="24" viewBox="0 0 24 24" fill="none"
										xmlns="http://www.w3.org/2000/svg">
										<rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1"
											transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
										<path
											d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z"
											fill="currentColor" />
									</svg>
								</span>
								<!--end::Svg Icon-->
								<input type="text" data-kt-customer-table-filter="search"
									class="form-control form-control-solid w-250px ps-15"
									placeholder="Search Customers" />
							</div>
							<!--end::Search-->
						</div>
						<!--begin::Card title-->
						<!--begin::Card toolbar-->
						<div class="card-toolbar">
							<!--begin::Toolbar-->
							<!--end::Toolbar-->
							<!--begin::Group s-->
							<div class="d-flex justify-content-end align-items-center d-none"
								data-kt-customer-table-toolbar="selected">
								<div class="fw-bold me-5">
									<span class="me-2" data-kt-customer-table-select="selected_count"></span>Selected
								</div>
								<button type="button" class="btn btn-danger"
									data-kt-customer-table-select="delete_selected">Delete Selected</button>
							</div>
						</div>
					</div>
					<div class="card-body pt-0">
						<table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_customers_table">
							<thead>
								<tr class="text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0">
									<th class="w-10px pe-2">
										<div class="form-check form-check-sm form-check-custom form-check-solid me-3">
										</div>
									</th>
									<th>S.No.</th>
									<th>Date</th>
									<th>Name</th>
									<th>Blog Title</th>
									<th>Comments</th>
									<th>Status</th>
									<th>Action</th>
								</tr>
								<!--end::Table row-->
							</thead>
							<!--end::Table head-->
							<!--begin::Table body-->
							<tbody class="fw-semibold text-gray-600">

								{% for i in comment %}
								<tr>
									<td></td>
									<td data-kt-ecommerce-order-filter="order_id"><a href="">{{i.commentid}}</a></td>
									<td>{{i.date}}</td>
									<td>{{i.name}} </td>
									<td data-kt-ecommerce-order-filter="order_id"><a target="_blank" href="/blog-details/{{i.blog.url_structure}}/">{{i.blog.title}}</a></td>
									<td>{{i.Commenttext}}</td>
									{%if i.isapproved == True %}
									<td>
										<div class="badge badge-light-success">Approved</div>
									</td>
									{%else%}
									<td>
										<div class="badge badge-light-warning">Pending</div>
									</td>
									{%endif%}
									<td>
										<div class="d-flex align-items-center gap-2 gap-lg-3"> <a href="#"
												class="btn btn-sm fw-bold btn-primary" data-bs-toggle="modal"
												data-bs-target="#kt_modal_new_target"
												onclick="updateModal({{i.commentid}});">View </a> </div>
									</td>
								</tr>
								{% endfor %}
							</tbody>
							<!--end::Table body-->
						</table>
						<!--end::Table-->
					</div>
					<!--end::Card body-->
				</div>
				<!--end::Card-->

			</div>
			<!--end::Content container-->
		</div>
		<!--end::Content-->
	</div>
	<!--end::Content wrapper-->

</div>
<!--end:::Main-->
</div>
<!--end::Wrapper-->
</div>
<!--end::Page-->
</div>
<!--end::App-->


<div class="modal fade" id="kt_modal_new_target" tabindex="-1" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered mw-650px">
		<div class="modal-content rounded">
			<div class="modal-header pb-0 border-0 justify-content-end">
				<div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal"> <span
						class="svg-icon svg-icon-1">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1"
								transform="rotate(-45 6 17.3137)" fill="currentColor" />
							<rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)"
								fill="currentColor" />
						</svg>
					</span> </div>
			</div>
			<div class="modal-body scroll-y px-10 px-lg-15 pt-0 pb-15">
				<form id="kt_modal_new_target_form" class="form" action="" method="post">
					{% csrf_token %}
					<div class="mb-13 text-center">
						<h1 class="mb-3">User's Comments About Blogs</h1>
						<div class="text-muted fw-semibold fs-5">If you need more info, please check <a href="/terms-of-service/" target="_blank"
								class="fw-bold link-primary">Project Guidelines</a>.</div>
					</div>
					<div class="row g-9 mb-8">
						<div class="col-md-6 fv-row">
							<label class="fs-6 fw-semibold mb-2">Comments no. :</label>
							<input type="text" id="comment-id" value="" class="form-control form-control-solid"
								name="target_title" readonly />
						</div>
						<div class="col-md-6 fv-row">
							<label class="fs-6 fw-semibold mb-2">Comment Date:</label>
							<div class="position-relative d-flex align-items-center"> <span
									class="svg-icon svg-icon-2 position-absolute mx-4">
								</span>
								<input type="text" id="ctdate" value="" class="form-control form-control-solid"
									name="target_title" readonly />
							</div>
						</div>
					</div>

					<div class="d-flex flex-column mb-8">
						<label class="fs-6 fw-semibold mb-2">Name :</label>
						<input type="text" id="ctname" value="" class="form-control form-control-solid"
							name="target_title" readonly />
					</div>

					<div class="d-flex flex-column mb-8">
						<label class="fs-6 fw-semibold mb-2">Comments Message :</label>
						<textarea class="form-control form-control-solid" id="commenttext" value="" rows="3"
							name="target_details" readonly></textarea>
					</div>
					<div class="text-center">
						<button type="submit" id="cancelbutton" name="deletebutton" value=""
							class="btn btn-danger">Delete</button>
						<button type="submit" id="butid" value="" name="approved" class="btn btn-primary"> <span
								class="indicator-label">Approved</span> <span class="indicator-progress">Please wait...
								<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>


<script type='text/javascript'>
	async function getapi(url) {
		const response = await fetch(url);
		var data = await response.json();
		for (var key in data) {
			for (var i = 0; i < data[key].length; i++) {
				document.getElementById("comment-id").value = data[key][i][0];
				document.getElementById("commenttext").value = data[key][i][1];
				document.getElementById("ctname").value = data[key][i][2];
				document.getElementById("ctdate").value = data[key][i][4];
			}
		}
	}

	function updateModal(id) {
		const commentid = id;
		document.getElementById("cancelbutton").value = commentid;
		document.getElementById("butid").value = commentid;
		const url = "https://www.influencerhiring.com/fetchblogcomment/" + commentid + "/";
		getapi(url);
	}
</script>
{%endblock%}